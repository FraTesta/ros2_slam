<?xml version="1.0" ?>
<robot name="orthopillar">

<link name="chassis">
    
    
    
    <collision name="collision">
    <origin xyz="0 0 0.2 "/>
      <geometry>
        <box size="0.6 0.3 0.3"/>
      </geometry>
    </collision>
    
    <visual name="visual">
      <geometry>
         <!-- <mesh filename="package://orthopillar_robot_spawner_pkg/models/ortho_meshes/meshes/orthopillar.stl" scale="0.25 0.25 0.25 " /> -->
      <box size="0.6 0.3 0.3"/>
      </geometry>
    </visual>
    
    <collision name="caster_collision">
     <origin xyz="0 0.15 -0.15"/>
      <geometry>
        <sphere radius=".05"/>
      </geometry>
 </collision>
    
    <visual name="caster_visual">
     <origin xyz="0 0.15 -0.15"/>
      <geometry>
        <sphere radius=".05"/>
      </geometry>
    </visual>
  </link>
  


  <link name="right_wheel">
    <inertial>
      <mass value="1"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="100" ixy="0" ixz="0" iyy="100" iyz="0" izz="100"/>
    </inertial>
    <!-- <pose>0.15 -0.13 0.1 0 1.5707 0</pose> -->
    <collision name="collision">
      <origin xyz="0.15 -0.13 0.1 " rpy=" 0 1.5707 0" />
      <geometry>
        <cylinder length=".05" radius=".1"/>
      </geometry>
    </collision>
    
    <visual name="visual">
    <origin xyz="0.15 -0.13 0.1 " rpy=" 0 1.5707 0" />
      <geometry>
        <cylinder length=".05" radius=".1"/>
      </geometry>
    </visual>
  </link>

<link name="left_wheel">
    <inertial>
      <mass value="1"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="100" ixy="0" ixz="0" iyy="100" iyz="0" izz="100"/>
    </inertial>
  <!-- <pose>-0.15 -0.13 0.1 0 1.5707 0</pose> -->
    <collision name="collision">
     <origin xyz="-0.15 -0.13 0.1 " rpy=" 0 1.5707 0" />
      <geometry>
        <cylinder length=".05" radius=".1"/>
      </geometry>
    </collision>
     
    <visual name="visual">
    <origin xyz="-0.15 -0.13 0.1 " rpy=" 0 1.5707 0" />
      <geometry>
        <cylinder length=".05" radius=".1"/>
      </geometry>
    </visual>
  </link>

  <joint name="left_wheel_hinge" type="revolute">
    <parent link="chassis"/>
    <child link="left_wheel"/>
    <origin rpy="0 0 0" xyz="0 0 0.03"/>
    <!-- <origin xyz="-0.15 -0.13 0.1 "/> -->
    <axis xyz="-1 0 0"/>
    <limit effort="10000" velocity="1000"/>
    <joint_properties damping="1.0" friction="1.0"/> 
   
  </joint>
  
  <joint name="right_wheel_hinge" type="revolute">
    <parent link="chassis"/>
    <child link="right_wheel"/>
    <origin rpy="0 0 0" xyz="0 0 -0.03"/>
    <!-- <origin xyz="0.15 -0.13 0.1"/> -->
    <axis xyz="-1 0 0"/>
     <limit effort="10000" velocity="1000"/>
    <joint_properties damping="1.0" friction="1.0"/> 
  </joint>
  
  

  <plugin name='diff_drive' filename='libgazebo_ros_diff_drive.so'>
         <ros>
           <namespace>/demo</namespace>
           <remapping>cmd_vel:=cmd_vel</remapping>
           <remapping>odom:=odom</remapping>
         </ros>

         <!-- wheels -->
         <left_joint>left_wheel_hinge</left_joint>
         <right_joint>right_wheel_hinge</right_joint>

         <!-- kinematics -->
         <wheel_separation>0.26</wheel_separation>
         <wheel_diameter>0.2</wheel_diameter>

         <!-- limits -->
         <max_wheel_torque>20</max_wheel_torque>
         <max_wheel_acceleration>1.0</max_wheel_acceleration>

         <!-- output -->
         <publish_odom>true</publish_odom>
         <publish_odom_tf>true</publish_odom_tf>
         <publish_wheel_tf>true</publish_wheel_tf>

         <odometry_frame>odom</odometry_frame>
         <robot_base_frame>chassis</robot_base_frame>
       </plugin>      
    

 

</robot>
